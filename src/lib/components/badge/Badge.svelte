<script lang="ts">
    import type { CssStyle } from '../utils/cssStyles'
    import type {
        BadgePassThroughMethodOptions,
        BadgePassThroughOptions,
        BadgeSeverity,
        BadgeSize,
        BadgeValue
    } from './badge.types'
    import JAZZ_SVELTE from '../api/JazzSvelte'
    import { resolvePT } from '../utils/ptUtils'
    import { isEmpty, isNotEmpty } from '../utils/Utils'

    export let value: BadgeValue = null
    export let severity: BadgeSeverity = null
    export let size: BadgeSize = null
    export let pt: BadgePassThroughOptions | null = null
    export let ptOptions: BadgePassThroughMethodOptions | null = null
    export let unstyled: boolean = false
    export let style: CssStyle = null

    // "root element"
    $: rootAttributes = resolvePT(
        [
            'p-badge p-component',
            {
                'p-badge-no-gutter': isNotEmpty(value) && String(value).length === 1,
                'p-badge-dot': isEmpty(value),
                'p-badge-m': size === 'medium',
                'p-badge-lg': size === 'large',
                'p-badge-xl': size === 'xlarge',
                [`p-badge-${severity}`]: severity !== null
            }
        ],
        style,
        pt?.root,
        JAZZ_SVELTE.pt?.badge?.root,
        ptOptions,
        unstyled
    )
</script>

<span data-pc-name="badge" data-pc-section="root" {...rootAttributes} {...$$restProps}>{value}</span>

<style>
    @layer primereact {
        .p-badge {
            display: inline-block;
            border-radius: 10px;
            text-align: center;
            padding: 0 0.5rem;
        }

        .p-badge.p-badge-m {
            font-size: 0.725rem;
            min-width: 1.55rem;
            height: 1.55rem;
            line-height: 1.55rem;
        }

        .p-overlay-badge {
            position: relative;
        }

        .p-overlay-badge .p-badge {
            position: absolute;
            top: 0;
            right: 0;
            transform: translate(50%, -50%);
            transform-origin: 100% 0;
            margin: 0;
        }

        .p-badge-dot {
            width: 0.5rem;
            min-width: 0.5rem;
            height: 0.5rem;
            border-radius: 50%;
            padding: 0;
        }

        .p-badge-no-gutter {
            padding: 0;
            border-radius: 50%;
        }
    }
</style>
